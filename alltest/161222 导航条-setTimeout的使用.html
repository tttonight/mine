<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>导航条-setTimeout的使用</title>
    <link rel="stylesheet" type="text/css" href="../../../css/bootstrap.min.css" media="all"/>
    <link rel="stylesheet" type="text/css" href="../../../css/bootstrap-theme.min.css" media="all"/>
    <link href="../bootstrap/dist/css/bootstrap.min.css" rel="stylesheet">

    <style type="text/css">
       #nav {margin:20px auto; width:810px; height:32px;}
       #nav ul{margin:0;padding:0;}
       #nav ul li{list-style:none; float:left; width:100px; line-height:32px; font-size:20px; text-align:center; background-color:#fdd;cursor:pointer;}
       #nav ul li.hover{background-color:#fcc;}
       #nav ul li a{text-decoration:none;}
       #nav li div {font-size:16px;}
       .subnav {position:absolute;display:none;background-color:white;width:auto!important;min-width:110px;border:1px solid #ddd; line-height:25px;height:25px;margin-top:10px;margin-left:10px; white-space:nowrap;}
       #nav .subnav p{margin-left:10px;padding-right:10px;}
    </style>
</head>
<body>
<div id="nav">
    <ul>
        <li><a href="javascript:;">站长之家</a></li>
        <li>
            <a href="javascript:;">行业资讯</a>
            <div class="subnav">
                <em class="arrow"></em>
                <p>         
                    <span>
                        <a href="javascript:;">业界动态</a>|
                        <a href="javascript:;">收购融资</a>|
                        <a href="javascript:;">门户动态</a>|
                        <a href="javascript:;">搜索引擎</a>|
                        <a href="javascript:;">网络游戏</a>|
                        <a href="javascript:;">电子商务</a>|
                        <a href="javascript:;">广告传媒</a>|
                        <a href="javascript:;">厂商开发</a>
                    </span>
                </p>
            </div>
        </li>
        <li>
            <a href="javascript:;">站长在线</a>
            <div class="subnav" >
                <em class="arrow"></em>
                <p>         
                    <span>
                        <a href="javascript:;">站长报道</a>|
                        <a href="javascript:;">好站推荐</a>|
                        <a href="javascript:;">站长聚会</a>|
                        <a href="javascript:;">站长访谈</a>|
                        <a href="javascript:;">站长茶馆</a>|
                        <a href="javascript:;">网站排行</a>
                    </span>
                </p>
            </div>
        </li>
        <li>
            <a href="javascript:;">网站运营</a>
            <div class="subnav">
                <em class="arrow"></em>
                <p>         
                    <span>
                        <a href="javascript:;">建站经验</a>|
                        <a href="javascript:;">策划盈利</a>|
                        <a href="javascript:;">搜索优化</a>|
                        <a href="javascript:;">网站推广</a>|
                        <a href="javascript:;">免费资源</a>
                    </span>
                </p>
            </div>
        </li>
        <li>
            <a href="javascript:;">设计在线</a>
            <div class="subnav">
                <em class="arrow"></em>
                <p>         
                    <span>
                        <a href="javascript:;">酷站推荐</a>|
                        <a href="javascript:;">网页设计</a>|
                        <a href="javascript:;">WEB标准</a>|
                        <a href="javascript:;">视频处理</a>|
                        <a href="javascript:;">设计活动</a>
                    </span>
                </p>
            </div>
        </li>
        <li>
            <a href="javascript:;">网络编程</a>
            <div class="subnav">
                <em class="arrow"></em>
                <p>         
                    <span>
                        <a href="javascript:;">Asp编程</a>|
                        <a href="javascript:;">Php编程</a>|
                        <a href="javascript:;">.Net编程</a>|
                        <a href="javascript:;">Xml编程</a>|
                        <a href="javascript:;">Access</a>|
                        <a href="javascript:;">Mssql</a>|
                        <a href="javascript:;">Mysql</a>
                    </span>
                </p>
            </div>
        </li>
        <li>
            <a href="javascript:;">联盟资讯</a>
            <div class="subnav">
                <em class="arrow"></em>
                <p>         
                    <span>
                        <a href="javascript:;">联盟动态</a>|
                        <a href="javascript:;">联盟介绍</a>|
                        <a href="javascript:;">联盟点评</a>|
                        <a href="javascript:;">网赚技巧</a>
                    </span>
                </p>
            </div>
        </li>
        <li>
            <a href="javascript:;">服务器</a>
            <div class="subnav">
                <em class="arrow"></em>
                <p>         
                    <span>
                        <a href="javascript:;">Web服务器</a>|
                        <a href="javascript:;">Ftp服务器</a>|
                        <a href="javascript:;">Mail服务器</a>|
                        <a href="javascript:;">Dns服务器</a>|
                        <a href="javascript:;">Win服务器</a>|
                        <a href="javascript:;">Linux服务器</a>|
                        <a href="javascript:;">安全防护</a>|
                        <a href="javascript:;">虚拟主机</a>
                    </span>
                </p>
            </div>
        </li>        
    </ul>    
</div>

<script>
(function() {
    var oNav = document.getElementById("nav");
    var oLi = oNav.getElementsByTagName("li");
    var aSubnav = oNav.getElementsByClassName("subnav");
    var oSubnav = timer = null;
    for(var i=0; i<oLi.length; i++) {
        oLi[i].onmouseover = function() {
            this.className = "hover";
            //隐藏所有子菜单
            for(var j=0; j<aSubnav.length; j++) {
                aSubnav[j].style.display = "none";
            }
            //获取该项下的子菜单
            oSubnav = this.getElementsByClassName("subnav")[0];
            if(oSubnav) {
                 oSubnav.style.display = "block";

                 //下面a显示的位置
                 l_width = oNav.offsetWidth +　oNav.offsetLeft - oSubnav.offsetWidth;
                 oSubnav.offsetLeft+oSubnav.offsetWidth-oNav.offsetLeft > oNav.offsetWidth ? 
                 oSubnav.style.left = l_width+"px": 
                 oSubnav.style.left = this.offsetLeft +"px";
                 //清除定时器，即停在li上不需要调用定时器，即不需要关闭
                clearTimeout(timer);
                //消除冒泡，不然鼠标停在li上，a会隔0.3秒就消失
                oSubnav.onmouseover = function(event) {
                    (event || window.event).cancelBubble = true;
                    //同理
                    clearTimeout(timer);
                }
            }
            
        };

        oLi[i].onmouseout = function() {  
            this.className = "";   
           
            timer = setTimeout(function() {
                if(oSubnav) {
                    oSubnav.style.display = "none";
                }
            },300);
        }

    }
}());

</script>
    <script src="../jquery/js/jquery-1.11.3.min.js"></script>
    <script src="../bootstrap/dist/js/bootstrap.min.js"></script>
</body>
</html>